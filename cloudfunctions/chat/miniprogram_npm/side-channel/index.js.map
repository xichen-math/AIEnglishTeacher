{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\r\n\r\nvar $TypeError = require('es-errors/type');\r\nvar inspect = require('object-inspect');\r\nvar getSideChannelList = require('side-channel-list');\r\nvar getSideChannelMap = require('side-channel-map');\r\nvar getSideChannelWeakMap = require('side-channel-weakmap');\r\n\r\nvar makeChannel = getSideChannelWeakMap || getSideChannelMap || getSideChannelList;\r\n\r\n/** @type {import('.')} */\r\nmodule.exports = function getSideChannel() {\r\n\t/** @typedef {ReturnType<typeof getSideChannel>} Channel */\r\n\r\n\t/** @type {Channel | undefined} */ var $channelData;\r\n\r\n\t/** @type {Channel} */\r\n\tvar channel = {\r\n\t\tassert: function (key) {\r\n\t\t\tif (!channel.has(key)) {\r\n\t\t\t\tthrow new $TypeError('Side channel does not contain ' + inspect(key));\r\n\t\t\t}\r\n\t\t},\r\n\t\t'delete': function (key) {\r\n\t\t\treturn !!$channelData && $channelData['delete'](key);\r\n\t\t},\r\n\t\tget: function (key) {\r\n\t\t\treturn $channelData && $channelData.get(key);\r\n\t\t},\r\n\t\thas: function (key) {\r\n\t\t\treturn !!$channelData && $channelData.has(key);\r\n\t\t},\r\n\t\tset: function (key, value) {\r\n\t\t\tif (!$channelData) {\r\n\t\t\t\t$channelData = makeChannel();\r\n\t\t\t}\r\n\r\n\t\t\t$channelData.set(key, value);\r\n\t\t}\r\n\t};\r\n\t// @ts-expect-error TODO: figure out why this is erroring\r\n\treturn channel;\r\n};\r\n"]}